import{c as R,r as i,u as q,j as e,m as p,S as A,w as U,b as M,A as O,X as G,P as n}from"./index-BgfU13Nz.js";import{i as W}from"./firebaseserivce-DaDA8FeV.js";import{p as H}from"./profileService-DbdqCSzk.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=R("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),w=({loading:a=!1,onClick:s,children:r})=>e.jsxs("button",{onClick:s,disabled:a,className:`w-full md:w-auto flex items-center justify-center gap-2 ${a?"bg-[#E8E3F5] cursor-not-allowed":"bg-[#D6CFE9] hover:bg-[#D4C1EC] hover:text-[#FAF4ED]"} text-[#403C5C] px-6 py-2 rounded-lg transition-colors`,children:[a?e.jsx(V,{className:"w-5 h-5 animate-spin"}):e.jsx(A,{size:20}),r]});w.propTypes={loading:n.bool,onClick:n.func.isRequired,children:n.node.isRequired};const E=({message:a,type:s,onClose:r})=>{const m={initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100}};return e.jsxs(p.div,{variants:m,initial:"initial",animate:"animate",exit:"exit",className:"flex items-center w-80 p-4 rounded-lg border shadow-lg bg-[#FAF4ED] text-[#403C5C] border-[#CBAACB]",children:[e.jsx("div",{className:"flex-shrink-0",children:s==="success"?"🚀":"❌"}),e.jsx("div",{className:"ml-3 flex-grow font-medium text-sm",children:a}),e.jsx("button",{onClick:r,className:"flex-shrink-0 ml-2 text-current opacity-70 hover:opacity-100",children:e.jsx(G,{className:"w-4 h-4"})})]})};E.propTypes={message:n.string.isRequired,type:n.oneOf(["success","error"]).isRequired,onClose:n.func.isRequired};const S=({children:a})=>e.jsx("div",{className:"fixed top-20 right-4 z-50 flex flex-col gap-2",children:e.jsx(O,{children:a})});S.propTypes={children:n.node.isRequired};const Q=()=>{const a={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.8}},exit:{opacity:0,y:-20,transition:{duration:.5}}},[s,r]=i.useState(""),[m,g]=i.useState(""),[F,h]=i.useState(""),[X,B]=i.useState(""),[C,k]=i.useState(""),[D,f]=i.useState([]),[x,b]=i.useState(!1),[y,j]=i.useState(!1),[P,v]=i.useState(!1),u=q(),c=(t,o)=>{const l=Math.random().toString(36).substr(2,9);f(d=>[...d,{id:l,message:t,type:o}]),setTimeout(()=>N(l),3e3)},N=t=>{f(o=>o.filter(l=>l.id!==t))};i.useEffect(()=>{const t=W(({user:o,userData:l})=>{var d;o?(g(o.email),h(o.email),B(o.uid),k((d=o.metadata)==null?void 0:d.creationTime),l?(r(l.name||"Guest"),P||(c("Welcome back, "+(l.name||"Guest")+"!","success"),v(!0))):(console.warn("User document not found in Firestore."),c("Profile not fully set up. Please update your information.","error"),v(!0))):u("/login")});return()=>t()},[u]);const T=()=>{b(!0)},L=async()=>{j(!0);try{const t=await H.updateName(s);r(t),b(!1),c("Profile updated successfully!","success")}catch(t){c(t.message,"error")}finally{j(!1)}},I=()=>s?s.charAt(0).toUpperCase():"?",z=()=>{M.signOut().then(()=>{console.log("Logged out"),c("Successfully logged out!","success"),u("/login")}).catch(t=>{console.error("Error logging out:",t),c("Failed to log out. Please try again!","error")})};return e.jsx(p.div,{className:"min-h-screen bg-[#FAF4ED] px-4 md:px-8 py-8 md:py-16",initial:"hidden",animate:"visible",exit:"exit",variants:a,children:e.jsxs("div",{className:"container mx-auto md:mt-14 max-w-4xl py-8 mt-20",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-24 h-24 rounded-full bg-[#D6CFE9] border-4 border-[#CBAACB] flex items-center justify-center text-3xl font-bold text-[#403C5C]",children:I()})}),e.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-[#403C5C]",children:["Welcome back, ",s?s.split(" ")[0]:"User","!"]})]}),e.jsxs("div",{className:"mt-8 md:mt-12",children:[e.jsxs(p.div,{className:"w-full p-6 md:p-8 rounded-xl bg-white border border-[#CBAACB] shadow-lg",whileHover:{scale:1.01},transition:{duration:.2},children:[e.jsx("div",{className:"space-y-4 text-center md:text-left",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-[#FAF4ED] border border-[#CBAACB]",children:[e.jsx("label",{className:"text-sm text-[#403C5C] opacity-80 block",children:"Full Name"}),x?e.jsx("input",{type:"text",value:s,onChange:t=>r(t.target.value),className:"text-lg font-semibold text-[#403C5C] border border-[#CBAACB] rounded-lg px-4 py-2 mt-2 w-full"}):e.jsx("p",{className:"text-lg font-semibold text-[#403C5C]",children:s})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-[#FAF4ED] border border-[#CBAACB]",children:[e.jsx("label",{className:"text-sm text-[#403C5C] opacity-80 block",children:"Email"}),x?e.jsx("input",{type:"email",value:F,onChange:t=>h(t.target.value),className:"text-lg font-semibold text-[#403C5C] border border-[#CBAACB] rounded-lg px-4 py-2 mt-2 w-full"}):e.jsx("p",{className:"text-lg font-semibold text-[#403C5C]",children:m})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-[#FAF4ED] border border-[#CBAACB]",children:[e.jsx("p",{className:"text-sm text-[#403C5C] opacity-80",children:"Member Since"}),e.jsx("p",{className:"text-lg font-semibold text-[#403C5C]",children:C?new Date(C).toLocaleDateString("en-US",{month:"long",year:"numeric"}):"Unknown"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-[#FAF4ED] border border-[#CBAACB]",children:[e.jsx("p",{className:"text-sm text-[#403C5C] opacity-80",children:"Account Status"}),e.jsx("p",{className:"text-lg font-semibold text-[#403C5C]",children:"Active"})]})]})}),e.jsxs("div",{className:"mt-8 flex flex-col md:flex-row items-center justify-center gap-4",children:[x?e.jsx(w,{loading:y,onClick:L,children:y?"Saving...":"Save Changes"}):e.jsxs("button",{onClick:T,className:"w-full md:w-auto flex items-center justify-center gap-2 bg-[#D6CFE9] text-[#403C5C] px-6 py-2 rounded-lg hover:bg-[#D4C1EC] hover:text-[#FAF4ED] transition-colors",children:[e.jsx(A,{size:20}),"Edit Profile"]}),e.jsxs("button",{onClick:z,className:"w-full md:w-auto flex items-center justify-center gap-2 bg-[#F28C8C] text-white px-6 py-2 rounded-lg hover:bg-[#E06B6B] transition-colors",children:[e.jsx(U,{size:20}),"Logout"]})]})]}),e.jsx(S,{children:D.map(t=>e.jsx(E,{message:t.message,type:t.type,onClose:()=>N(t.id)},t.id))})]})]})})};export{Q as default};
