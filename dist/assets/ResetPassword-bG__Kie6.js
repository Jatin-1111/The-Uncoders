import{c as F,r as x,j as e,R as o,u as L,q as H,D as M,E as V,m as c,A as y,X as z,P as i}from"./index-BgfU13Nz.js";import{c as p,a as I}from"./cn-JCLedEej.js";import{C as Y,a as O,b as U,c as X}from"./card-Cq7a8m_h.js";import{C}from"./circle-check-big-qrnszBCX.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=F("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),G=I("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),v=x.forwardRef(({className:s,variant:t,...r},n)=>e.jsx("div",{ref:n,role:"alert",className:p(G({variant:t}),s),...r}));v.displayName="Alert";const b=x.forwardRef(({className:s,...t},r)=>e.jsx("h5",{ref:r,className:p("mb-1 font-medium leading-none tracking-tight",s),...t}));b.displayName="AlertTitle";const j=x.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:p("text-sm [&_p]:leading-relaxed",s),...t}));j.displayName="AlertDescription";const N=({message:s,type:t,onClose:r})=>e.jsxs(c.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100},className:"flex items-center w-80 p-4 rounded-lg border shadow-lg bg-[#FAF4ED] text-[#403C5C] border-[#CBAACB]",children:[e.jsx("div",{className:"flex-shrink-0",children:t==="success"?"ðŸš€":e.jsx(C,{className:"w-5 h-5"})}),e.jsx("div",{className:"ml-3 flex-grow font-medium text-sm",children:s}),e.jsx("button",{onClick:r,className:"flex-shrink-0 ml-2 text-current opacity-70 hover:opacity-100",children:e.jsx(z,{className:"w-4 h-4"})})]});N.propTypes={message:i.string.isRequired,type:i.oneOf(["success","error"]).isRequired,onClose:i.func.isRequired};const R=({children:s})=>e.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2",children:e.jsx(y,{children:s})});R.propTypes={children:i.node};const k=({onReturn:s})=>e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex flex-col items-center space-y-4",children:[e.jsx(C,{className:"w-16 h-16 text-green-500"}),e.jsx("p",{className:"text-center text-[#403C5C] text-lg",children:"Your password has been successfully reset. You can now log in with your new password."}),e.jsx(c.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"mt-4 px-6 py-2 bg-[#403C5C] text-white font-semibold rounded-lg shadow-lg hover:bg-[#5C6BC0]",onClick:s,children:"Return to Login"})]});k.propTypes={onReturn:i.func.isRequired};const P=({error:s,newPassword:t,onPasswordChange:r,onSubmit:n})=>e.jsxs(c.form,{onSubmit:n,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex flex-col space-y-4",children:[s&&e.jsxs(v,{className:"bg-red-50 border-red-200",children:[e.jsx(_,{className:"w-5 h-5 text-red-500"}),e.jsx(b,{children:"Error"}),e.jsx(j,{children:s})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#403C5C] mb-1",children:"New Password"}),e.jsx("input",{type:"password",value:t,onChange:r,placeholder:"Enter your new password",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#D4C1EC]"})]}),e.jsx(c.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full py-3 bg-[#403C5C] text-white font-semibold rounded-lg hover:bg-[#5C6BC0]",children:"Reset Password"})]});P.propTypes={error:i.string,newPassword:i.string.isRequired,onPasswordChange:i.func.isRequired,onSubmit:i.func.isRequired};const Z=()=>{const[s,t]=o.useState(""),[r,n]=o.useState(""),[h,T]=o.useState(!1),[A,g]=o.useState([]),f=L(),E=H(),u=new URLSearchParams(E.search).get("oobCode"),m=o.useCallback((a,l)=>{const d=Math.random().toString(36).substr(2,9);g(D=>[...D,{id:d,message:a,type:l}]),setTimeout(()=>w(d),3e3)},[]),w=o.useCallback(a=>{g(l=>l.filter(d=>d.id!==a))},[]),S=o.useCallback(a=>{t(a.target.value)},[]),q=o.useCallback(async a=>{if(a.preventDefault(),!s||s.length<6){n("Password must be at least 6 characters long.");return}if(!u){n("Invalid or expired reset link.");return}try{const l=M();await V(l,u,s),T(!0),t(""),n(""),m("Password successfully reset!","success")}catch{n("Failed to reset password. The link might have expired."),m("Failed to reset password","error")}},[s,u,m]),B=o.useCallback(()=>{f("/login")},[f]);return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-tr from-[#ECE4DA] via-[#D6CFE9] to-[#CBAACB]",children:[e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"w-[90%] max-w-md",children:e.jsxs(Y,{className:"shadow-2xl overflow-hidden",children:[e.jsx(O,{className:"bg-gradient-to-r from-[#403C5C] to-[#5C6BC0] text-white",children:e.jsx(U,{className:"text-2xl font-extrabold",children:h?"Password Reset Successful":"Reset Password"})}),e.jsx(X,{className:"p-6",children:e.jsx(y,{mode:"wait",children:h?e.jsx(k,{onReturn:B}):e.jsx(P,{error:r,newPassword:s,onPasswordChange:S,onSubmit:q})})})]})}),e.jsx(R,{children:A.map(a=>e.jsx(N,{message:a.message,type:a.type,onClose:()=>w(a.id)},a.id))})]})};export{Z as default};
